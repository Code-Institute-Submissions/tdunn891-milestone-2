<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">

   <!-- bootstrap -->
   <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
   <!-- dc css -->
   <!-- TODO look for dc.min.css and test if required at all -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dc/3.1.5/dc.css"
      integrity="sha256-AqNj0S7N1lVLHuYiA9ydJqGXI/9NMQOCGf40m1iyQI0=" crossorigin="anonymous" />
   <!-- google fonts -->
   <link href="https://fonts.googleapis.com/css?family=Share+Tech&display=swap" rel="stylesheet">
   <!-- favicon -->
   <link rel='icon' href='/assets/img/favicon-32x32.png' type='image/x-icon'>
   <!-- style.css -->
   <link rel="stylesheet" href="assets/css/style.css">
   <title>SpaceX Interactive Dashboard</title>
</head>

<body>
   <nav class="navbar navbar-expand-lg navbar-dark">
      <a class="navbar-brand" href="#">SpaceX Interactive Dashboard</a>
      <!-- <p style="vertical-align: middle; color: whitesmoke;">Data Source: SpaceX API</p> -->
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup"
         aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
         <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navbarNavAltMarkup">
         <div class="navbar-nav">
            <a class="nav-item nav-link active" href="#">LAUNCH EXPLORER<span class="sr-only">(current)</span></a>
            <a class="nav-item nav-link" href="#next-launch">NEXT LAUNCH</a>
            <a class="nav-item nav-link" href="#payload-analysis">PAYLOAD ANALYSIS</a>
            <a class="nav-item nav-link" href="#starman">WHERE'S STARMAN?</a>
            <a href="javascript:dc.filterAll(); dc.redrawAll();" class="btn btn-primary active">Reset</a>
         </div>
      </div>
   </nav>
   <!-- TODO ensure charts are responsive on ipad (currently hang over) -->
   <!-- TODO provide links to falcon9 and falconheavy on spacex website -->
   <div class="container-fluid">
      <div class="row">
         <div class="col-12">
            <h2><img src="/assets/img/falcon-heavy-in-flight-icon.svg" class="filter-navy" style="width: 48px;" />
               Launch Explorer</h2>
            <div class="dc-data-count">
               <span class="filter-count"></span>
               <span class="total-count"></span>
            </div>
         </div>
      </div>
      <div class="row">
         <!-- TODO ensure chart colours are not green or red (success/fail) -->

         <div class="col-md-6 col-lg-4">
            <div data-toggle="tooltip" data-placement="top"
               title="Shows number of times SpaceX has launched each rocket." class="chart"
               id="pieChartLaunchesByRocket">
               <h3>Launches By Rocket</h3>
               <div class="spinner-grow text-light" role="status">
                  <span class="sr-only">Loading...</span>
               </div>
            </div>
            <div data-toggle="tooltip" title="A given launch is deemed a success if it doesn't blow up during launch!"
               class="chart" id="rowChartLaunchSuccess">
               <h3>Launch Success</h3>
            </div>
         </div>
         <div class="col-md-6 col-lg-4">
            <div data-toggle="tooltip"
               title="Shows the upward trend of SpaceX launches year on year, grouped by rocket." class="chart"
               id="chartLaunchesPerYearByVehicle">
               <h3>Launches By Year</h3>
               <div class="spinner-grow text-light" role="status">
                  <span class="sr-only">Loading...</span>
               </div>
            </div>
         </div>
         <div class="col-md-12 col-lg-4">
            <div data-toggle="tooltip"
               title="Shows the distribution of launches among SpaceX's four launch sites, grouped by rocket. Cape Canaveral is SpaceX's most used launch pad."
               class="chart" id="chartLaunchesBySiteAndRocket">
               <h3>Launches By Site</h3>
               <div class="spinner-grow text-light" role="status">
                  <span class="sr-only">Loading...</span>
               </div>
            </div>
         </div>
      </div>
      <div class="row" style="display: none;">
         <div class="col-md-12 col-lg-4">
            <div style="display: none;" class="chart">
               <!-- <h3>Percentage Launch Success</h3> -->
               <div id="numberDisplayLaunchSuccessRate" style="font-size: 20px; text-align: center;"></div>
               <div id="numberDisplayLaunchSuccessTotal" style="font-size: 20px; text-align: center;"></div>
               <div id="numberDisplayLaunchPercent"></div>
            </div>
         </div>
         <div class="col-lg-4">
            <div class="chart" id="rowChartLaunchSuccess">
            </div>
         </div>
      </div>
      <div class="row">
         <div class="col-12">
            <!-- TODO Make datatable more responsive -->
            <div id="paging">
               Showing <span id="begin"></span>-<span id="end"></span> of <span id="size"></span> <span
                  id="totalsize"></span>
               <input id="prev" class="btn btn-info" type="Button" value="Previous" />
               <input id="next" class="btn btn-info" type="button" value="Next" />
            </div>
            <!-- TODO ensure table doesn't affect mobile responsiveness (hangs too far right) -->
            <div class="table-responsive">
               <table id="dc-data-table" class="table table-dark table-hover table-sm table-striped">
               </table>
            </div>
            <!-- Modal -->
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
               aria-hidden="true">
               <div class="modal-dialog modal-lg">
                  <div class="modal-content" id=modal-content>
                  </div>
               </div>
            </div>
         </div>
      </div>

      <div class="row">
         <div class="col-12">
            <h2 id="next-launch"><img src="/assets/img/falcon-heavy-icon.svg" class="filter-navy" style="width: 48px" />
               Next Launch</h2>
         </div>
      </div>
      <div class="row">
         <div class="col-md-12 col-lg-6">
            <div class="card" id="nextMissionCard">
               <div class="card-body">
                  <h4 class="card-title"></h4>
                  <p class="card-text">
                     <ul>
                        <li></li>
                        <li></li>
                        <li></li>
                        <li></li>
                        <li></li>
                     </ul>
                  </p>
               </div>
            </div>
            <div data-toggle="tooltip" title="Counting down to the next launch..." id="nextLaunchCountdown">
               <table>
                  <col width="80px">
                  <col width="80px">
                  <col width="80px">
                  <col width="80px">
                  <tr id="counter">
                     <td id="days">&nbsp;</td>
                     <td id="hours">&nbsp;</td>
                     <td id="minutes">&nbsp;</td>
                     <td id="seconds">&nbsp;</td>
                  </tr>
                  <tr>
                     <td>days</td>
                     <td>hours</td>
                     <td>mins</td>
                     <td>secs</td>
                  </tr>
               </table>
            </div>
            <!-- https://www.addevent.com/add-to-calendar-button -->
            <div title="Add to Calendar" class="addeventatc" id=addToCalendar>
               Add Launch to Calendar
               <span class="title"></span>
               <span class="timezone">Europe/London</span>
               <span class="start"></span>
               <span class="location"></span>
               <span class="description"></span>
            </div>
         </div>
         <div class="col-md-12 col-lg-6">
            <div data-toggle="tooltip" title="Next launch scheduled from this launchpad." id="map"></div>
            <script>
               //TODO: move map; to main.js
               // initialise map variable
               var map;
            </script>
         </div>
      </div>
      <!-- Countdown to next launch -->
      <div class="row">
         <div class="col-12">
            <!-- Satellite icon source: https://www.iconfinder.com/icons/1587506/internet_line_satellite_icon -->
            <h2 id="payload-analysis"><img src="/assets/img/satellite-icon.svg" class="filter-navy" style="width: 48px;"
                  alt="satellite icon" /> Payload Analysis </h2>
            <div class="dc-data-count-payloads">
               <span class="filter-count"></span>
               <span class="total-count"></span>
            </div>
         </div>
      </div>
      <div class="row">
         <div class="col-md-6 col-lg-4">
            <div data-toggle="tooltip"
               title="SpaceX deploys payloads (satellites) into different types of orbit. This chart shows number of payloads deployed to each orbit. The most common being Geostationary Transfer Orbit (GTO), followed by Low Earth Orbit (LEO)."
               class="chart" id="pieChartPayloadByOrbit">
               <h3>Payloads by Orbit</h3>
               <div class="spinner-grow text-light" role="status">
                  <span class="sr-only">Loading...</span>
               </div>
            </div>
         </div>
         <div class="col-md-6 col-lg-4">
            <div data-toggle="tooltip"
               title="Manufacturers build payloads (satellites) to be deployed into orbit by SpaceX. This chart shows the number payloads built by each manufacturer."
               class="chart" id="pieChartPayloadManufacturer">
               <h3>Payloads by Manufacturer</h3>
               <div class="spinner-grow text-light" role="status">
                  <span class="sr-only">Loading...</span>
               </div>
            </div>
         </div>
         <div class="col-md-6 offset-md-3 offset-lg-0 col-lg-4">
            <div data-toggle="tooltip"
               title="Shows the number of payloads deployed of each type. The most common payload is 'Satellite' - all other types are SpaceX vehicles."
               class="chart" id="rowChartPayloadType">
               <h3>Payloads by Type</h3>
               <div class="spinner-grow text-light" role="status">
                  <span class="sr-only">Loading...</span>
               </div>
            </div>
         </div>
      </div>
      <div class="row">
         <div class="col-12">
            <h2 id="starman"><img src="/assets/img/starman-icon.svg" class="filter-navy" style="width: 48px" /> Where's
               Starman?</h2>
         </div>
      </div>
      <div class="row">
         <div class="col-lg-6">
            <!-- TODO change ID from example interval -->
            <div id="carouselExampleInterval" class="carousel slide" data-ride="carousel">
               <div class="carousel-inner">
                  <div class="carousel-item active" data-interval="3000">
                     <img src="https://farm5.staticflickr.com/4615/40143096241_11128929df_b.jpg" class="d-block w-100"
                        alt="Elon's Tesla Roadster">
                  </div>
                  <div class="carousel-item" data-interval="3000">
                     <img src="https://farm5.staticflickr.com/4702/40110298232_91b32d0cc0_b.jpg" class="d-block w-100"
                        alt="Elon's Tesla Roadster">
                  </div>
                  <div class="carousel-item" data-interval="3000">
                     <img src="https://farm5.staticflickr.com/4676/40110297852_5e794b3258_b.jpg" class="d-block w-100"
                        alt="Elon's Tesla Roadster">
                  </div>
                  <div class="carousel-item" data-interval="3000">
                     <img src="https://farm5.staticflickr.com/4745/40110304192_6e3e9a7a1b_b.jpg" class="d-block w-100"
                        alt="Elon's Tesla Roadster">
                  </div>
               </div>
               <a class="carousel-control-prev" href="#carouselExampleInterval" role="button" data-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="sr-only">Previous</span>
               </a>
               <a class="carousel-control-next" href="#carouselExampleInterval" role="button" data-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="sr-only">Next</span>
               </a>
            </div>
         </div>
         <div class="col-lg-6">
            <div class="card" id="roadster-card">
               <div class="card-body">
                  <h4 class="card-title">Elon Musk's Tesla Roadster</h4>
                  <p class="card-text">
                     <ul>
                        <li><strong>Launch Date:</strong> 6 February 2018</li>
                        <li><strong>Current Speed:</strong> <span id="speed"></span> km/h </li>
                        <li><strong>Current Distance from Earth: </strong><span id="earth-distance"></span> km</li>
                        <li><strong>Days in Orbit:</strong> <span id="days-in-space"></span> days</li>
                        <li><strong>Details:</strong> <span id="roadster-details"></span></li>
                     </ul>
                  </p>
               </div>
            </div>
         </div>
      </div>
   </div>

   <!-- SCRIPTS -->
   <!-- d3 -->
   <script src="https://d3js.org/d3.v5.min.js"></script>
   <!-- crossfilter -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter2/1.5.0/crossfilter.min.js"
      integrity="sha256-se5X4Z76HEuvDAemWFPeAT8JQ9lSjCLxK2JMmlEH/1Q=" crossorigin="anonymous"></script>
   <!-- dc.js -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/dc/3.1.8/dc.min.js"
      integrity="sha256-of0ppkk8kx6hoZFwjArlspZWjkNdWR/NUbGbQVvWr/c=" crossorigin="anonymous"></script>
   <!-- jquery -->
   <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
      integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
      crossorigin="anonymous"></script>
   <!-- popper.js -->
   <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"></script>
   <!-- bootstrap -->
   <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
      crossorigin="anonymous"></script>
   <!-- Google Maps API -->
   <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAAL9c7KZMQ6Bxqj7xLL5JSCF3OwWgHuN0&callback=initMap"
      async defer></script>
   <!-- calendar js -->
   <script type="text/javascript" src="https://addevent.com/libs/atc/1.6.1/atc.min.js" async defer></script>
   <!-- YouTube -->
   <script src="https://apis.google.com/js/platform.js"></script>
   <!-- main.js -->
   <script src="assets/js/main.js"></script>
   <script>
      // TODO Move apiCalls to main.js
      apiCall();
      apiCallNextLaunch();
      apiCallPayloads();
      apiCallRoadster();
      // jquery activate tooltips
      $(document).ready(function () {
         $("body").tooltip({ selector: '[data-toggle=tooltip]' });
      });
   </script>
</body>

<footer>
   <!-- Footer list -->
   <ul id="footer-list">
      <!-- SpaceX API -->
      <li> Data Source: <a href="https://github.com/r-spacex/SpaceX-API" target="_blank">SpaceX API</a></li>
      <!-- SpaceX Official Website -->
      <li><a href="https://www.spacex.com" target="_blank" data-toggle="tooltip" title="SpaceX Official"><img
               src="assets/img/spacex_logo_white.png" /></a></li>
      <!-- Youtube Channel -->
      <li>
         <div class="g-ytsubscribe" data-channel="spacexchannel" data-layout="full" data-theme="dark"
            data-count="default"></div>
      </li>
   </ul>
   <span>Developed by Thomas Dunn <a href="https://github.com/tdunn891" target="_blank">GitHub</a></span>
   <!-- TODO fix footer -->
</footer>

</html>